---
layout: default
title: Save Interactive State
description: |
  Interactive starts out empty and then page sends interactive JSON to it.
---
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="http://concord-consortium.github.io/iframe-phone/dist/iframe-phone.js"></script>
<p>
  <a id="get-json">Get Interactive JSON from iframe</a>
</p>
<p>
  The link above gets the data from the interactive and prints it
  in the console.
</p>
<iframe id="interactive-iframe" width="565px" height="435px"
        frameborder="no" scrolling="no" allowfullscreen="true"
        webkitallowfullscreen="true" mozallowfullscreen="true"
        src="http://lab.concord.org/embeddable.html#interactives/interactions/charge-table-U1-Inv1.json">
</iframe>

<script>
  // Call this function when jQuery thinks the page is ready.
  var interactive;
  $(function () {
    // Intitialization.
    interactive = new iframePhone.ParentEndpoint($('#interactive-iframe')[0], function () {
      console.log("Connection with Lab iframe established.");
    });

    $('#get-json').click(function () {
      interactive.addListener('interactiveState', function(content) {
        console.log(JSON.stringify(content, null, 2));
      });
      interactive.post('getInteractiveState');
    })
  });
</script>
