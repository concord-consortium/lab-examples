---
layout: default
title: Coordination
description: |
  Demonstrates embedding multiple Interactives and only letting one play at a time.
  The code listens for the play event and calls stop on all other interactives.
---
<script src="http://concord-consortium.github.io/iframe-phone/dist/iframe-phone.js"></script>
<iframe class="interactive" width="460px" height="375px"
        frameborder="no" scrolling="no" allowfullscreen="true"
        webkitallowfullscreen="true" mozallowfullscreen="true"
        src="http://lab.concord.org/version/0.9.0/embeddable.html#interactives/basic-examples/area-versus-applied-pressure.json">
</iframe>
<iframe class="interactive" width="460px" height="375px"
        frameborder="no" scrolling="no" allowfullscreen="true"
        webkitallowfullscreen="true" mozallowfullscreen="true"
        src="http://lab.concord.org/version/0.9.0/embeddable.html#interactives/basic-examples/area-versus-applied-pressure.json">
</iframe>
<iframe class="interactive" width="460px" height="375px"
        frameborder="no" scrolling="no" allowfullscreen="true"
        webkitallowfullscreen="true" mozallowfullscreen="true"
        src="http://lab.concord.org/version/0.9.0/embeddable.html#interactives/basic-examples/area-versus-applied-pressure.json">
</iframe>
<script>
  (function () {

    var interactives = [],
        interactiveIframes = document.querySelectorAll(".interactive");

    for (var i=0; i < interactiveIframes.length; i++ ) {
      interactives.push(new iframePhone.ParentEndpoint(interactiveIframes[i]));
    }

    interactives.forEach(function(interactive){
      interactive.addListener('modelLoaded', function(){
        interactive.post('listenForDispatchEvent', {eventName: 'play.coordination'});
        interactive.addListener('play.coordination', playListener.bind(interactive));
      });
    })

    function playListener () {
      var interactive = this;
      interactives.forEach(function (otherInteractive){
        if (otherInteractive != interactive) {
          otherInteractive.post('stop');
        }
      });
    }

  })();
</script>
